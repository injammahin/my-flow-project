<!-- Testimonials Section -->
<div class="about ambala-section" data-aos="fade-right" data-aos-duration="1000">
  <div class="main-section">
      <div class="text-center mb-5">
          <h3 class="ambala_heading mb-4">Testimonials from Our Respected Clients</h3>
          <p class="ambala_paragraph">
              Trusted by leading brands, we deliver exceptional software solutions that drive results.
          </p>
      </div>
      <div class="container customr">
          <div id="testimonial-slider" class="owl-carousel owl-theme">
              @foreach ($reviews as $review)
                  <div class="item">
                      <div class="testimonial">
                          <div class="testimonial-content">
                              <p class="review-text">{!! $review->text !!}</p>
                          </div>
                          <div class="testimonial-info">
                              <div class="pic">
                                  <img class="img-fluid rounded-circle"
                                       src="{{ asset('media/review/' . $review->image) }}"
                                       alt="{{ $review->author }}">
                              </div>
                              <h3 class="testimonial-title">
                                  <a href="#">{{ $review->author }}</a>
                                  <small>{{ $review->role }}</small>
                                  @if ($review->video_url)
                                      <i class="fab fa-youtube youtube-icon" data-toggle="modal"
                                         data-target="#youtubeModal{{ $review->id }}"
                                         style="cursor: pointer; color: #FF0000;"></i>
                                  @endif
                              </h3>
                          </div>
                      </div>
                  </div>
              @endforeach
          </div>
      </div>
  </div>
</div>

<!-- Modal for YouTube Videos -->
@foreach ($reviews as $review)
  @if ($review->video_url)
      @php
          // Convert the YouTube URL to an embeddable format
          $embedUrl = str_replace('youtu.be/', 'www.youtube.com/embed/', $review->video_url);
          $embedUrl = str_replace('watch?v=', 'embed/', $embedUrl);
      @endphp
      <div class="modal fade" id="youtubeModal{{ $review->id }}" tabindex="-1" role="dialog"
           aria-labelledby="youtubeModalLabel{{ $review->id }}" aria-hidden="true">
          <div class="modal-dialog modal-lg" role="document">
              <div class="modal-content">
                  <div class="" style="background: #000!important;">
                      <div class="embed-responsive embed-responsive-16by9">
                          <iframe class="embed-responsive-item" src="{{ $embedUrl }}" allowfullscreen></iframe>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  @endif
@endforeach

<!-- Owl Carousel and jQuery Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.min.js"></script>

<script>
  $(document).ready(function() {
      $("#testimonial-slider").owlCarousel({
          items: 3,
          itemsDesktop: [1000, 3],
          itemsDesktopSmall: [979, 2],
          itemsTablet: [768, 1],
          pagination: true,
          navigation: false,
          slideSpeed: 1000,
          autoPlay: true
      });
  });
</script>

<!-- CSS Styles -->
<style>
  .testimonial {
      margin: 0px 30px;
      background-color: #fff;
      text-align: center;
      color: #1C743E;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 40px;
      position: relative;
  }

  .testimonial-content {
      padding: 20px 30px;
      font-size: 15px;
      line-height: 1.6;
      text-align: left;
      color: #555;
      position: relative;
  }

  .testimonial .pic {
      display: inline-block;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      overflow: hidden;
      margin-bottom: 15px;
  }

  .testimonial .pic img {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
  }

  .testimonial .testimonial-title {
      margin-top: 10px;
      font-size: 18px;
      color: #1C743E;
      font-weight: 700;
  }

  .testimonial .testimonial-title a {
      color: #1C743E;
      text-decoration: none;
  }

  .testimonial .testimonial-title small {
      display: block;
      color: #888;
  }

  .testimonial .youtube-icon {
      font-size: 24px;
      margin-left: 10px;
      color: #FF0000;
      cursor: pointer;
  }

  .owl-theme .owl-controls .owl-page span {
      height: 12px;
      width: 12px;
      background-color: #1C743E;
      border-radius: 0;
      opacity: 0.8;
      transform: rotate(45deg);
  }

  .owl-theme .owl-controls .owl-page.active span,
  .owl-theme .owl-controls .owl-page:hover span {
      background-color: #A58E38;
  }
</style>
